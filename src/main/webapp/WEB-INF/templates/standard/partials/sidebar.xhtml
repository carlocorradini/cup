<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:fn="http://java.sun.com/jsp/jstl/functions"
>
    <ui:fragment rendered="#{not empty person.authPerson}">
        <nav class="ui left sidebar vertical menu big" id="sidebar-menu">

            <div class="close-container">
                <div id="sidebar-menu-close" class="close"></div>
            </div>

            <div id="sidebar-avatar-error" class="hidden">
                <div class="ui negative message tiny">
                    <i class="exclamation triangle icon"/>
                    #{i18n["sidebar.avatar.error"]}
                    <h:outputText value="#{app.configAvatarMaxFileSize / 1024}">
                        <f:convertNumber integerOnly="true"/>
                    </h:outputText>
                    KByte
                </div>
            </div>

            <div class="avatar">
                <div class="avatar-edit">
                    <input type="file" id="sidebar-avatar-input"
                           accept=".png, .jpg, .jpeg"
                           data-max-size="#{app.configAvatarMaxFileSize}"
                    />
                    <label for="sidebar-avatar-input">
                        <i class="pencil alternate icon"/>
                    </label>
                </div>
                <div class="avatar-save hidden" id="sidebar-avatar-save">
                    <i class="save outline icon blue"/>
                    <i class="check icon green hidden"/>
                    <i class="close icon red hidden"/>
                    <i class="notched circle loading icon hidden"/>
                </div>
                <div class="avatar-preview">
                    <h:graphicImage id="sidebar-avatar-image"
                                    library="default"
                                    name="images/avatar/#{person.authPerson.avatar.name}#{app.configAvatarExtension}"
                                    alt="Avatar"
                    />
                </div>
            </div>

            <h4 class="name-surname text-overflow-ellipsis">
                #{fn:toUpperCase(fn:substring(person.authPerson.name, 0, 1))}#{fn:toLowerCase(fn:substring(person.authPerson.name, 1,fn:length(person.authPerson.name)))}
                #{fn:toUpperCase(fn:substring(person.authPerson.surname, 0, 1))}#{fn:toLowerCase(fn:substring(person.authPerson.surname, 1,fn:length(person.authPerson.surname)))}
            </h4>

            <div class="item">
                <div class="ui input">
                    <input type="text" placeholder="Search..."/>
                </div>
            </div>

            <h:link outcome="/dashboard/index"
                    styleClass="item"
            >
                <i class="th icon"/>
                #{i18n["dashboard.dashboard"]}
            </h:link>

            <div class="item">
                <div class="header">Esami</div>
                <div class="menu">
                    <a class="item">
                        Risultati
                        <div class="ui label">3</div>
                    </a>
                    <a class="item">prenotazioni</a>
                </div>
            </div>
            <ui:fragment rendered="#{not empty doctor.authDoctor}">
                <div class="item">
                    <div class="header">Pazienti</div>
                    <div class="menu">
                        <a class="item">Esami</a>
                        <a class="item">Ricette</a>
                    </div>
                </div>
            </ui:fragment>

            <div class="item">
                <a href="#{request.contextPath}/signout.handler" class="ui red fluid button">
                    #{i18n['common.signOut']}
                </a>
            </div>
        </nav>
    </ui:fragment>
</ui:composition>
